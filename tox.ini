[tox]
skipsdist=True
skip_missing_interpreters=True
envlist = py{35,36}-django{20,21,22}

[testenv]
passenv = DISPLAY
basepython =
    py36: python3.6
    py37: python3.7
deps =
    flake8
    coverage

setenv =
    PYTHONPATH = {toxinidir}(PollsApp/):{env:PYTHONPATH:}

    coverage: DJANGO_TEST_RUNNER=coverage run manage.py test
    coverage: COVERAGE_PROCESS_START={toxinidir}(PollsApp/.coveragerc)
    coverage: COVERAGE_FILE={toxinidir}(PollsApp/.coverage)
    coverage: DJANGO_COVERAGE_SRC={toxinidir}(PollsApp/)

changedir = {toxinidir}(PollsApp/)
commands =
    coverage: coverage erase
    coverage: coverage combine
    coverage: coverage report
    flake8 --version
    flake8 .
